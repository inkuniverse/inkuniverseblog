---
title: 浅谈线段树
date: 2020-06-19 21:25:19
tags: 笔记
---

## 线段树介绍

**线段树**是处理区间问题的一种数据结构，它可以处理的问题有：

* 区间查询
* 单点查询
* 区间更新
* 单点更新

## 线段树的性质

<!--more-->

* 叶子节点记录的是一个**实际数据**
* 非叶子节点记录的是它的**孩子节点**的值的**和/积/最小值/最大值**（只要可合并性质）

## 线段树的基本思想

一般来说，我们认为**线段树**是一个**满二叉树**，但是实际情况中，**线段树表示的区间元素数量**往往不是2的整数次幂。因此，**线段树**实际上是一个**完全二叉树**,

![完全二叉树图片](https://gitee.com/inkuniverse/picture_bed/raw/master/img/无标题.png)

## 线段树的基本操作
1. 区间查询
可以采用递归的方法来进行区间查询，头节点有一个区间[1,n]，所有的节点都有一个区间(l,r),l=r说明是叶子节点，返回即可。<br/>
如果ql,qr包含l,mid,那么递归左边。<br/>
如果ql,qr包含mid+1,r,那么递归右边;<br/>
统计**和/积/最小值/最大值**;<br/>


2. 区间更新
 **敲黑板** 这里的操作涉及到一个叫“**懒标记**”的东西.
 * 懒标记
 ![](https://gitee.com/inkuniverse/picture_bed/raw/master/img/20200619221943.png)
 ~~好图不厌百回拿~~<br/>
 假如我要把圈出的区域都归0，我可以一个一个遍历（dfs/bfs）,但是如果子树巨大，也会很慢。
 ![打标记](https://gitee.com/inkuniverse/picture_bed/raw/master/img/20200619222339.png)
 这样不是更快？
 * 基本思路在此
 若完全被包含，设置懒标记，否则递归左右子树。

3. 单点更新
 ![神图在此](https://gitee.com/inkuniverse/picture_bed/raw/master/img/20200619222618.png)
 先递归找到节点，再一层一层更新节点。

 实现网上很多，就不写了~~（懒~~